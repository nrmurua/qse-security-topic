Currently all CI build jobs in the Katas CI build use the latest released Microsoft.Quantum.Katas package (the version defined in the .csproj files). E2E builds build the package currently defined in the code and then update the katas to use that package before running the validations. This means that when a bad change is introduced to the M.Q.Katas package, Katas CI build can pass but the E2E build can fail.
We need to add a new CI build job that follows the same pattern as the E2E builds:
An example of the change that brought this up is https://github.com/microsoft/QuantumKatas/tree/mariia/count-nary-operations (in particular, changing CounterSimulator's _operationsCount key from ICallable to String), which causes the later cells in DeutschJozsaAlgorithm kata to fail validation, but the katas that don't use CounterSimulator functionality still passed.
#690 attempted to fix this, but with that PR the CI build fails on the first cell of each notebook, including the ones which use only QuantumSimulator.
We will be migrating the Katas to the new QDK that will use a different infrastructure (see https://devblogs.microsoft.com/qsharp/introducing-the-azure-quantum-development-kit-preview/ for the announcement), so we won't continue to improve the existing infrastructure of Q# notebooks magics. Closing this issue as "won't fix".
