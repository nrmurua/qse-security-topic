quantum now has basic DHCP support, and will automatically select and available IP on start up if not configured with a private IP. However these IP's do not persist locally through reboot/restart of the service, and will cause the service to get a new ip on every restart even if the lease time has not expired.
So persistent DHCP leases need to be implemented, this should be a simple matter of saving state to disk somewhere. The state needs to be validated on lease expiration, and never overwrite existing keys if state is expired.
