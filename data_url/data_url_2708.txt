This will be easier to understand.
Fixed by #890
