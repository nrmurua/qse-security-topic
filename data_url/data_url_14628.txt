We wish to be able to use qiskit.algorithms  (specifically, VQE) on quantum circuits  associated with classical registers. Currently, qiskit.opflow.state_fns.circuit_state_fn   raises a TypeError rejecting any  circuit with classical bits:
For instance, this TypeError is raised when vqe.construct_expectation()  method wants  to run the line ansatz_circuit_op = CircuitStateFn(wave_function)  but in general, I think the use of CircuitStateFn could affect other classes beyond VQE (e.g. qiskit gradient framework).
In particular for the VQE class,  from my understanding, it is not possible to avoid calling CircuitStateFn using options for passing your own expectation value calculation.  Another suggestion is to locally comment out the code raising TypeError to see if the logic is supported but so far this approach stalls at other errors.
