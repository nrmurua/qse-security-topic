The setInverse method does not exist on the Gate interface currently (as we can't store state there).
That leads to ugly casts that need to be fixed.
fixed
