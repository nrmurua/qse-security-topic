It should be optimized for the tradeoff between the number of measurements and the variance of the result (e.g. section IV.A of https://arxiv.org/pdf/1801.03524.pdf and other things like grouping together terms of the Hamiltonian). @ncrubin probably has already implemented some of this in a different context.
Blocked by #1299
#2781 is related to this.
