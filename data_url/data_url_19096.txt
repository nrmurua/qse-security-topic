Currently the optimization method has no limit on the parameter space. For example, in the case of "simple state to state", the S(t) is initially set to be within [0, 1] but this range no longer holds. This agrees with practical consideration where the maximal B_x is limited.
I don't have the full context of what you did, but if you are referring to the S(t) e.g. in cell 6 of https://krotov.readthedocs.io/en/stable/notebooks/01_example_simple_state_to_state.html, this function is not the control field! This "shape" function regulates the update of the field in each iteration (when S(t) = 0, the control field is never updated for that value of t, when S(t) = 1, the update is maximally large). The control field is not in the range [0, 1].
You're certainly not the first person to be confused by this, and the current (still unreleased) master branch of krotov takes some steps to try to make this more explicit, mostly by renaming "shape" to "update_shape", and not reusing S(t) in the control field in the examples, cf. the master-branch version of that same example notebook at https://krotov.readthedocs.io/en/latest/notebooks/01_example_simple_state_to_state.html. There, the control field is defined in cell 2, and is completely unrelated to the update-shape in cell 8.
Still, you are right that the krotov package currently does not allow to place amplitude constraints on the control field. However, this is not a fundamental limitation of Krotov's method, see https://krotov.readthedocs.io/en/latest/09_howto.html#how-to-limit-the-amplitude-of-the-controls, and the implementation of this feature is planned for a future release, see #23.
Closing as duplicate of #23.
