The following hangs in what appears to be an infinite loop with ecr appearing never to be solved so it keeps looping.  Since a cx gate uses a cross-resonance gate on IBM systems, it should be possible to decompose it.
Update: It does not hang but takes forever to fail.
It is actually a bit odd because the QASM def of ecr is:
which is in terms of other basis gates.  This is different from other basis gates in which their definition is itself:
So on IBM systems a cx is generated by a cr gate (or ecr), but the definition then casts a cr gate in terms of cx
My understanding was that this definition is not even being used by the Transpiler? The OpenQASM2 specification defines U and CX as special gates to be used to inform the respective compiler of the unitary representation of the derived gate. See page 5 https://arxiv.org/pdf/1707.03429.pdf.
So I can not actually use ecr gates then?  They are not defined in Qiskit anywhere and I cannot transpile to them although they are a valid basis gate per the device. Note that cx gates on ibm devices are defined in terms of cr gates so this definition seems circular.
CX is not circular. It has a special meaning in OpenQASM2 as a unitary representation, please see my comment above.
Something like
will work.
Confusing but will close as this is the expected behavior
