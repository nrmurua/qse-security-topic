The "sanity checks" mentioned in contraction_utils.h should be documented in the input_formats file. In particular, the naming restrictions surrounding cuts need to be properly explained.
Some context: when performing a cut, we iterate over all projection values of the cut. Since we allocate memory on a per-patch-name basis, and memory space is shared across these iterative steps, it's crucial that patches modified before a cut are not also modified after that cut - otherwise, the changes will spill over to the next iteration.
It would be possible to avoid this restriction by saving all patches prior to a cut, but this has a substantial memory cost. Instead, we prefer allowing users to specify which patches to copy by 'renaming' them with a merge after the cut. An example of this using the original 7x7 grid contraction can be found in the "ExampleOrdering" test.
Now included in PR #69.
As a point of clarification, the reasoning behind keeping this restriction instead of automatically fixing it (i.e., internally renaming patches when reused after a cut) is that every renaming operation incurs a memory cost. By requiring explicit renaming, we hope to help users identify possible memory optimizations more easily.
