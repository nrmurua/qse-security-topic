Mock backends, such as FakeMelbourne can have their options set via set_options, but the instantiated simulator only sees these options if they are passed via kwarg through the run method
Instantiate a mock backend, set options to change number of shots to 100. Running a circuit will then result in the default number of shots (1024).
I would hope (and expect) setting the options on a backend would result in the instantiated simulator sharing the same options.
Make simulator backends generated by mock backends share the same options (in particular number of shots) as the backend which instantiates them
Thanks for opening an issue on this, but it's a duplicate of #6741 which has already been fixed on the main branch and backported to the stable branch for an upcoming 0.18.1 release. I'm going to close this accordingly, but please feel free to reopen it if I'm mistaken or there is more to discuss.
I am aware of the kwarg fix, stumbled into myself while debugging. However, I believe the following is not addressed by the kwarg fix:
I would expect the above code to run the circuit with 100 shots, but I am fairly certain that it will still use the default number of shots, even though backend.options would indicate that shots=100.
Ah, I misread the issue (based on the title mostly). That's actually a more general issue with execute and not isolated to the fake backends or simulators. I actually have a fix proposed for this issue here: #6693 I'll reopen this and target that PR as fixing this.
