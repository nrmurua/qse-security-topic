The two routines have largely the same functionality but unfortunately differ by a transpose in their input. For example:
raises an AssertionError but if the line
is changed to
then there is no error.
These routines should actually be merged into one. The difference between the two routines is that bogoliubov_transform includes an argument that can be used to optimize the circuit if the initial state is known, but optimal_givens_decomposition has a more efficient overall strategy. These routines should be merged into one routine that uses the more efficient strategy, but can also optimize the circuit based on the initial state.
do you recall if bogoliubov_transform is using the Clements algorithm to construct the circuit?  If not then they should not be merged into one.
bogoliubov_transform does not use the Clements algorithm, which means that using bogoliubov_transform without specifying the initial state is obsoleted by optimal_givens_decomposition. However, if the initial state is specified then the algorithm used by bogoliubov_transform is actually more efficient than the Clements algorithm. That's why I think the functions should be merged. Instead of having two separate functions for performing the same task, one of which partially obsoletes the other, there should be one function for performing the task which uses the best algorithm in all cases. As for which name we should keep, I'm partial to bogoliubov_transform because it describes the logical operation being done; this is consistent with the other circuit routines in the library.
That's a valid point. However, in this case the "different algorithms" are based on the same idea (decomposing the unitary into Givens rotations), so it seems to me that one strategy really does completely obsolete the other.
In optimal_decomposion there isn't a good way to take advantage of particle number.  One algorithm does not obsolete the other.  If you'd like to submit a PR based on your prior observation updating the documentation to say that one of these methods implements U^{dag} then that would be good.  Otherwise I will close this issue.
