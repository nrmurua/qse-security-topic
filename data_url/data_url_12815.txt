There is a solution for the task using 2 gates instead of 4.
Fixed in #242. Indeed the reference solution was more obscure then necessary.
Thank you!
