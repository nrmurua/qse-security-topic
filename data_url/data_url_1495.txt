When running tests, warning and deprecation warnings can give a heads up on things that need to change in the near future, especially given Cirq's deprecation cycles. And if there's a test failure, one would like to see the details without having to develop carpal tunnel in the scroll-finger. We're currently overwhelmed by deprecation warnings from protos
I think this engine proto code is autogenerated by google api core tooling (gapic). @wcourtney, can we update gapic to get a newer proto version?
It looks like there was a related issue in the common python protos library: googleapis/python-api-common-protos#23
It looks like they filtered these warnings as a short-term solution: microsoft/Qcodes#2598
They also added a fix that should resolve this if we re-build the proto set. IIRC, there were some manual tweaks to the generated protos that we'll need to identify and resolve. Fixing this import process seems like a good task for our new cirq_google steward and I'll add it to the list of known projects there.
This looks like a duplicate of a long-standing issue in Cirq: #4161. In short: the warnings are due to compiling protos with an old version of protoc, but updating that to the current version breaks our TFQ compatibility.
Current workarounds include:
the filters in setup.cfg would satisfy me if they work
I'll close this issue with #4751 and will leave #4161 open to remove the warnings eventually (once protoc upgrade no longer breaks compatibility with TFQ).
In short: the warnings are due to compiling protos with an old version of protoc, but updating that to the current version breaks our TFQ compatibility.
This is no longer blocked by TFQ (and hasn't been for a while) it is entirely a matter of regenerating v1alpha1 using the internal gapic builds we have and then opening a PR with those changes. protoc considerations for TFQ are no longer an issue.
Re-opening as this was never fixed for me by the linked PR. Would appreciate any further investigation or assistance
@mpharrigan, we updated the generated code in #5139 so the file referenced in the warnings no longer exists:
cirq/cirq-google/cirq_google/engine/client/quantum_v1alpha1/proto/quantum_pb2.py:219
Could you try again to see if that has fixed these warnings? The new generated code uses the proto-plus library rather than the default generated proto code.
Running tests locally I no longer see any of these warnings related to protos, so going to close this. @mpharrigan, please confirm when you get a chance and we can always reopen if needed.
