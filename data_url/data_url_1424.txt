Seems like it should be fairly straightforward to make Gate, Operation, and GateOperation classes generic, based on the type returned by .on() and .gate respectively. Same thing subsequently for .with_tags, .with_classical_controls, etc. It would be nice to be able to preserve that type information. This doesn't require any quantum knowledge and could be a good issue for new contributors.
The second part of this may not be possible given the way we flatten stacked tagged operations and controlled ops. But the first part should be doable.
This ends up being a bit of a pain because now suddenly cirq.X(q) and cirq.Y(q) are different types, so mypy complains if you try to make a list of them.
I'm closing this to get it out of my queue. If anyone wants to pick this up, please create a separate issue.
