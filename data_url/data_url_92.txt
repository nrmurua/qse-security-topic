Including code snippets directly as code blocks in rst files is fragile and there is a good change that the code in the docs will become incorrect over time. We hence should move code snippets into their own file and build and run that file as part of CI. Selective lines from these files can be included in the docs using literalinclude.
In particular the examples in the language specification section should not be hardcoded in the rst file.
