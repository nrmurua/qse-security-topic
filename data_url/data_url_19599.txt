When the parity check matrix for the X stabilizers of the 2x2 2D toric code is used to initialise a Matching object, the following error is returned in version  v0.7.0. It had previously worked in version v0.2.4 without any error.
The following error message is produced
Perhaps is it possible to have backwards compatibility?
Having what I think is the same problem trying to initialize a Matching object for the 17-qubit surface code.
And this produces exactly the same error message (but with edge (2,4)).
The reason for this issue is that parallel edges aren't currently supported in pymatching (for the check matrices you have both given, there are duplicated columns) although I will add support for parallel edges in a future version. You can fix the issue with the current version by either (1) keeping only the parallel edge with the smallest weight, or (2) merging parallel edges. (2) is probably the better option since the error mechanisms of parallel edges are indistinguishable. Suppose edges e1 and e2 are parallel and have probabilities p1 and p2. Assuming they represent independent error mechanisms, they can be merged into a single edge e3 with probability p3=p1*(1-p2)+p2*(1-p1) and corresponding edge weight w3=log((1-p3)/p3). More generally, if you have many parallel edges with probabilities given in some list probabilities, then you can use the following function to find the probability of the merged edge (the probability that an odd number of the independent parallel edge error mechanisms occurred):
In a future pymatching version, I'll probably just use the smallest-weight parallel edge by default, but provide an option to merge edges. I'll leave this issue open until then.
This is now fixed and will be in the next release. There will be a merge_strategies argument when loading from check matrix or adding an edge, which can be used to determine how pymatching merges parallel edges (with options "disallow", "independent", "smallest-weight", "keep-original" and "replace").
