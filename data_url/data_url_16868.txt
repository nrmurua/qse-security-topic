During scheduling, there is a method get_measure_schedule which is defined within the function. This is generally a useful method and should be redefined as a standalone function that is called during scheduling.
I'm going to merge this issue and #3700 into the discussion for #3480, since they will all be done together
