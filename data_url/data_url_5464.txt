Right now scratch space used in reading-from-file functions is allocated based on the depth of the circuit. It should be allocated based on the max rank of each qubit before contraction with neighbors.
