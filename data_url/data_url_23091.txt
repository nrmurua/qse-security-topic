done in spectrum_analyzer branch
