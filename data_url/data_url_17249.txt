It looks like this is potentially caused by an issue in dagcircuit.collect_runs() It's supposed to return a list of non-conditional runs of op nodes with the given names. But in the cy().c_if() example above a conditional is being returned which is triggering the if for a condition here: https://github.com/Qiskit/qiskit-terra/blob/master/qiskit/transpiler/passes/optimize_1q_gates.py#L50
