Hi,
While trying to export QASM for Shor's example code, there is an assert exception being thrown. Below is the stack trace. Precisely while exporting Math Gate with control qubits. in QASM
QASM:  CMultiplyByConstantModN(1, 15) | ( Qureg[4], Qureg[0-3] )
file: _ibm.py, line: 165 --
assert get_control_count(cmd) == 0 if str(gate) in self._gate_names: gate_str = self._gate_names[str(gate)] else: gate_str = str(gate).lower()
Hi,
What compiler engines are you using? This would help me to reproduce the error.
Our IBM compiler engines (such as the IBMCNOTMapper used in your example) are hand optimized for the 5 qubit IBM Quantum Experience chip. Compiling Shor's algorithm for this chip will fail because of not enough qubits and/or too many gates anyway.
Hi,
Please find the source file and ProjectQ code ( which i am currently using) attached.
I am just trying to get the QASM output from ProjectQ by making changes to _ibm_http_client.py. But i am m not trying to authenticate and execute on IBM's chip.
projectq (2).zip
FacR3.zip
Hi,
You are only using a single compiler engine which merely does the mapping of CNOTs.
Therefore, the compiler sends a very high-level math gate directly to the IBMBackend, which only knows how to do very low-level gates.
In order to compile Shor's algorithm down to the same level of operations, you need to re-introduce the other compiler engines (defining intermediate gate sets and plugging in AutoReplacers). Since you might also want to optimize the code along the way, you'll also need a few LocalOptimizers.
Just check out the original shor.py example and you will see that all of the compiler engines are there.
You don't need the IBMCNOTMapper since it will fail anyway, as @damiansteiger already pointed out. To output the circuit, simply use the CommandPrinter backend.
Oh and to get OpenQASM-compatible code, I would suggest editing the CommandPrinter rather than the ibm_http_client file. Translating to QASM means simply changing a few things like upper/lower-case and removing the |.
Hi @thomashaener ,
As suggested, i'm using CommandPrinter  and added all other compiler engines and now i ran into different issue with same high-level gate, When i looked into the decomposition rules, i did not find any for the below gate.
My modified source code has been attached for your reference.
MultiplyByConstantModN(current_a, N) | x
FacR3.zip
I just ran the code you sent and it works fine.
On a different note, you can add another gate filter to arrive at a low-level gate set (single-qubit gates + CNOTs):
and add InstructionFilter(low_level_gates), after the second AutoReplacer (you'll also need to import the global phase gate Ph from projectq.ops).
And I prefer to use CommandPrinter(accept_input=False) which does not ask you for measurement input but assumes all measurement outcomes to be 0 by default.
I am still facing the issue.
Are you using the ProjectQ code that I'm using.
Can you also please let me know the python version you are using and share your CommandPrinter  output.
projectq.zip
Stacktrace:
Traceback (most recent call last): File "E:\workspace-dd\PShor2\src\FacR3\FacR3.py", line 129, in <module> r = run_shor(eng, N, a, False) File "E:\workspace-dd\PShor2\src\FacR3\FacR3.py", line 62, in run_shor MultiplyByConstantModN(current_a, N) | x File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_basics.py", line 200, in __or__ apply_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_command.py", line 58, in apply_command engine.receive([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_main.py", line 226, in receive self.send(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 201, in _process_command chosen_decomp.decompose(cmd)  # run the decomposition File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\libs\math\_default_rules.py", line 59, in _replace_multiplybyconstantmodN mul_by_constant_modN(eng, c, N, quint) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\libs\math\_constantmath.py", line 95, in mul_by_constant_modN AddConstantModN((c << i) % N, N) | quint_out File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_basics.py", line 200, in __or__ apply_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_command.py", line 58, in apply_command engine.receive([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 219, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 201, in _process_command chosen_decomp.decompose(cmd)  # run the decomposition File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\libs\math\_default_rules.py", line 49, in _replace_addconstmodN add_constant_modN(eng, c, N, quint) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\libs\math\_constantmath.py", line 63, in add_constant_modN AddConstant(N) | quint File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_basics.py", line 200, in __or__ apply_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_command.py", line 58, in apply_command engine.receive([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 219, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_compute.py", line 245, in receive self.send(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 201, in _process_command chosen_decomp.decompose(cmd)  # run the decomposition File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\libs\math\_default_rules.py", line 39, in _replace_addconstant add_constant(eng, c, quint) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\libs\math\_constantmath.py", line 42, in add_constant R(math.pi / (1 << (i - j))) | quint[i] File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_basics.py", line 200, in __or__ apply_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\ops\_command.py", line 58, in apply_command engine.receive([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 219, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_compute.py", line 247, in receive self.send(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Error in atexit._run_exitfuncs: Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434BC70>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 69, in receive self._handle_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\meta\_control.py", line 65, in _handle_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B850>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B7D0>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B750>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B650>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_cmdmodifier.py", line 57, in receive self.send(new_command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B150>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B0D0>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Deallocate | Qureg[0] Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Deallocate | Qureg[0] Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B050>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x04338FD0>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Exception ignored in: <bound method Qubit.__del__ of <projectq.types._qubit.Qubit object at 0x0434B290>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\types\_qubit.py", line 129, in __del__ self.engine.deallocate_qubit(weak_copy) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 153, in deallocate_qubit tags=[DirtyQubitTag()] if is_dirty else [])]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 203, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i])) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive self._process_command(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive self.send([cmd]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive self._cache_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd self._check_and_send() File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send self._send_qubit_pipeline(i, len(self._l[i]) - self._m + 1) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline self._send_qubit_pipeline(Id, gateloc) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline self.send([il[i]]) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send self.next_engine.receive(command_list) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive self._add_cmd(cmd) File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd self.gate_counts[gate_description] += 1 TypeError: unhashable type: 'DaggeredGate' Deallocate | Qureg[0] Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Invalid qubit pipeline encountered (in the process of shutting down?). Exception ignored in: <bound method MainEngine.__del__ of <projectq.cengines._main.MainEngine object at 0x04338F30>> Traceback (most recent call last): File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_main.py", line 153, in __del__ File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_main.py", line 242, in flush File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_main.py", line 226, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 216, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 72, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 236, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 214, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_replacer\_replacer.py", line 126, in _process_command File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_tagremover.py", line 58, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 239, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 225, in _cache_cmd File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 200, in _check_and_send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 72, in _send_qubit_pipeline File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_optimize.py", line 82, in _send_qubit_pipeline File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\cengines\_basics.py", line 186, in send File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 135, in receive File "C:\Users\ABC_USER\AppData\Roaming\Python\Python36\site-packages\projectq\backends\_resource.py", line 85, in _add_cmd TypeError: unhashable type: 'DaggeredGate' 
They changed quite a few things in Python3.6 which caused bugs in older version of ProjectQ, so it should run fine if you check out the develop branch.
I was using Python2.7 to run your code.
Could you try to remove the resource counter?
Great, Thanks!
It worked after removing ResourceCounter().
Can you explain the difference it made.
Great! I didn't see it in the log at first, but the compilation fails when the resource counter tries to add a DaggeredGate to its dictionary (to keep track of the counts). Before, it always added a string-representation instead of the gate itself, but this made circuit analysis harder.
To add something to a dictionary, it needs to be hashable, so we needed to implement __hash__-functions wherever we defined a custom __eq__, but forgot to do that for DaggeredGate apparently :-)
OK. Thanks!
Sure, thanks for pointing it out! The issue should be fixed in a few minutes.
