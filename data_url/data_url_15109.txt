I am having issues with the procedure of binding values for some parameters. From the error messages etc is seems that the passes value is not real, but I am sure that they are. Furthermore, by saving the circuit with qpy, and opening in in another file and there binding it to the same values yields no error.
The code can be found at this repo: https://github.com/Arvendui/qiskit_bind_params
The file mwe.py reproduces the error and saves the circuit. The circuit can be opened and the values binded in for_issue.py, without any errors.
The other files are needed for imports.
The file mwe.py generates the error that is troublesome, as the fact that saving the circuit and running it in for_issue.py runs without errors.
No response
Hi @Arvendui, thanks for the report. Could you reduce the mwe.py to a smaller example? Ideally, a minimal example has only the bare minimum of Qiskit logic to reproduce the bug, but in the snippet you reference there is a lot happening ðŸ™‚ Also, the circuit used in for_issue.py doesn't seem to be in the repository.
Without running the script, it seems the parameters you are trying to bind
are real, so likely the underlying circuit has some complex coefficients that makes this fail.
Hi @Cryoris, thanks for the feedback. I will try to reduce more the mwe, but the code was already reduced by much. The main problem is that I don't understand where the error is coming from. I think that before you spend a crazy amount of time into it, the best is if you could elaborate a bit more on "so likely the underlying circuit has some complex coefficients that makes this fail.": do you mean that I am passing some complex numbers somewhere else? Would that be happening when using bind_parameters?
The circuit to be ran in for_issue.py is generated by first running mwe.py (which produced the error, and on the other hand opening that again in for_issue.pydoes not produce the error).
I mean that there might be a calculation that was done with complex numbers and there might be a small complex residual. For example in the following, sin(10 pi) should be 0, but isn't due to numerical roundoff, which causes the complex parameter error.
One thing you could try is to print the value of the parameter in validate_paramters in the Gate class on L228, to investigate what numerical value your parameters have and why they are recognized as complex.
Closing this as "cannot reproduce" due to the lack of minimisation in the example.  If you're able to reduce your example (to a reasonable single code block - 1000 lines of unrelated code is not minimal - see the instructions on what constitutes a MWE), and it's still showing similar problems, please feel free to re-open.
