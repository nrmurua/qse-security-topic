When reloading qutip in a jupyter notebook, the following error shows up.
/home/arjan/.pyxbld/temp.linux-x86_64-3.8/pyrex/qutip/cy/openmp/parfuncs.cpp:703:10: fatal error: src/zspmv_openmp.hpp: No such file or directory
703 | #include "src/zspmv_openmp.hpp"
|          ^~~~~~~~~~~~~~~~~~~~~~
Due to this, I cannot make adjustments to the qutip code.
I've reinstalled qutip, numpy, scipy, matplotlib, gcc (now version 9.3.0) and cython (0.29.27). That, so far, has not solved the issue.
I've searched for this issue, and it seems it has been seen before. However, I could not find any information on how to resolve it.
@AFvanloo Could you explain a little more what you are doing? The error appears to have been generated by an attempt to recompile qutip.cy.openmp.parfuncs without openmp installed, which is unlikely to have happened unless something is attempting to rebuild every cython or cpp file and ignoring qutip's setup.py.
I also see pyrex in your path. The last stable release of pyrex was in 2010 and as far as I know it is still inactive.
I am not sure what advice to give yet, but I am curious about what is going on. :)
I'll try to explain as much as I can, but I'm not sure exactly what is going on. The error might have been there for quite a while, it was not until I recently tried to modify qutip regarding the other issue I raised that I noticed that changes I made had no effect because qutip was not compiling. Earlier today I did manage to get changes to qutip to register and work, but I still get this error on reload. Maybe it no longer matters.
While pyrex is in the path, it seems to not be installed. (I cannot import or uninstall it). I can also not remember installing openMP, although I'm not sure if openMP capability comes with gcc by default.
This issue is likely something strange with my exact installation. What has me confused is that re-installing the packages does not seem to solve anything.
Apologies for the unclear explanation. If there is any specific information I can add, please tell me what I can do.
My qutip.about() is:
QuTiP Version:      4.6.3
Numpy Version:      1.22.2
Scipy Version:      1.8.0
Cython Version:     0.29.27
Matplotlib Version: 3.5.1
Python Version:     3.8.10
Number of CPUs:     8
BLAS Info:          OPENBLAS
OPENMP Installed:   False
INTEL MKL Ext:      False
Platform Info:      Linux (x86_64)
@AFvanloo My wild guess about what has happened is:
There is nothing wrong with modifying QuTiP, but I would suggest first trying to compile an unmodified QuTiP in the ordinary way -- e.g. by following https://qutip.org/docs/latest/installation.html#installing-from-source.
Then, once that is working, you can modify the source code and recompile in the same way.
I'm going to close this issue for now since it doesn't seem like a bug, but please feel free to keep asking questions in this issue or on the mailing list.
If you have an new feature you'd like to add, you can also open an issue specifically for it and we can discuss that separately (and if you like you can submit a pull request with the change you want).
Ah, maybe you are trying to fix #1808?
It was during fixing/changing the behaviour shown in 1808 that I first saw the issue. It seems now that I can change the qutip code, and to some degree at least it does compile, but the mentioned error still shows up in the terminal on running reload(qutip). Its likely that the error was there before I started modifying any files, and that I did not happen to spot it between all the lines jupyter tends to print in the terminal.
It also shows up on my system after I force a fresh installation of qutip with no changes. It does not currently seem to stop me from doing anything, but I don't know what causes it.
