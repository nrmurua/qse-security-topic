possibly use function decorator.
duplicate of #1
