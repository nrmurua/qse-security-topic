Right now, quilc uses a placeholder value of 0.5 for the fidelity of any non-native gate (cf. the default value in occurrence-table-cost), which it uses to guide the compiler-finder away from non-native sequences toward native ones. This has a variety of flaws, including: if the fidelity of a native gate dips below (0.5)^(1/3) ≈ 0.79, the finder is liable to prefer nonnative gates to native ones!
A very meager "solution" to this problem is to make the value 0.5 a tunable constant. The only fully robust solution to this problem is to track non-native and native gates separately, but this will complicate the priority queue code—at the very least, it'll have to use a custom comparator.
Oops, this is already #373.
