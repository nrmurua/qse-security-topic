At present, define-compiler et al. make decisions based on the literal type of various values. For instance,
knows to check the parameter on the input CPHASE gate against the constant value pi because the reader-eval'd #.pi is, in fact, a floating point number even by the time the macro-function gets to see it.
It would be preferable to allow more complicated constants, like a user-defined constant pi/2 or the symbolic expression (/ pi 4), to serve in #.pi's stead. The predicate constantp can be used to check whether simple expressions like these are, indeed, constants, but some other attendant logic around symbols-versus-numbers gets pretty hairy.
