Layout should be established during the embed stage of the transpiler, but several mapping passes have logic to establish their own layouts or change the layout provided. These should be extracted into their own passes and mappers should instead rely on the layouts set in the property_set.
