Currently, at some places programs are represented as InstructionBlocks. With the new create_program mehod there is no longer an intermediate InstructionBlock object so we need to allow Loops there.
