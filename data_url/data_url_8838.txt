There's currently a problem for some circuits where turning on loop folding during the dem conversion can result in the error decomposition failing. It has something to do with the errors available to use as part of the decomposition being restricted, due to the loop only seeing its own errors instead of the surrounding errors. Probably the correct fix is to somehow take the intersection of the errors before the loop and during the loop and make those available to the decomposition.
