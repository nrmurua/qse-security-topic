Make it so that we don't have smart pointers pointing to other smart pointers in our states.
Update: States are now going away in favor of simulators knowing how to do everything so once we get that in place we can close this issue. @zaqqwerty is taking charge on this now
