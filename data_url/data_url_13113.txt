The following test is failing repeatedly on CI.

It looks to be mostly on MacOS, but I'm not positive that's the only OS it's failing on. More details can be found in the logs here, but the short of it is that the matrix gates created in this function are not equal.
