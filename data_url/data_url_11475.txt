I would like to change the VQE callback to the below, to allow one to access an accurate picture of the evaluation steps, and to distinguish between single energy and gradient evaluations. Right now we call the callback once for each energy calculated, so a 16-energy gradient calculation is not distinguishable to the callback from a single-energy evaluation. The code below calls the callback with a list of parameters, energies, and stds for all of the evaluations in that call to _energy_evaluation. This has caused me trouble in the past and I've been asked several times now to group this information in this way. This is a breaking change, to any existing callback usage, unless we can think of a way otherwise.
Right now we do:
I am not sure how that solves the problem - the issue is the optimizer using the same callback to compute the next point on the curve via gradient or whatever. Normally only one parameter set (point) is passed in at once, and even when grouped (which is not default) they are done so in order to potentially allow more parallellization on a simulator and the groupings are most likely just part of a gradient too, i.e. a subset of the set of points of the gradient computation.
