Wrap this code I wrote into renderer

Think #269 would help here.  Will try to do that soon.
