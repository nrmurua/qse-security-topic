The following should compile to no more than three gates.
where chip is
